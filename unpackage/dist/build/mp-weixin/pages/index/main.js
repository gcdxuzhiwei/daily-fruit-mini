(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/index/main"],{3570:function(t,e,n){"use strict";var o;n.d(e,"b",(function(){return a})),n.d(e,"c",(function(){return i})),n.d(e,"a",(function(){return o}));var a=function(){var t=this,e=t.$createElement,n=(t._self._c,t.__map(t.goodsList,(function(e,n){var o=t.__get_orig(e),a=t.priceFix(e.rule[0][1],1),i=t.priceFix(e.rule[0][1],2);return{$orig:o,m0:a,m1:i}})));t.$mp.data=Object.assign({},{$root:{l0:n}})},i=[]},"36e9":function(t,e,n){"use strict";(function(t,o){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a=function(){n.e("pages/component/navBar").then(function(){return resolve(n("a2f6"))}.bind(null,n)).catch(n.oe)},i={components:{navBar:a},data:function(){return{location:"",swiper:[],goodsList:[]}},onShow:function(){this.$refs.nav.getSum()},mounted:function(){var e=this;t.getStorageSync("location")?this.location=t.getStorageSync("location"):t.getLocation({type:"wgs84",success:function(t){e.location=t.longitude.toFixed(2)+","+t.latitude.toFixed(2)}}),o.callFunction({name:"indexManager",data:{type:"getSwiper"}}).then((function(t){e.swiper=t.result.data})),o.callFunction({name:"goods",data:{type:"shuffle"}}).then((function(t){e.goodsList=t.result}))},methods:{priceFix:function(t,e){t=t.toFixed(2)+"";var n=t.split(".");return 1==e?n[0]:2==e?n[1]:void 0},chooseLocal:function(){var e=this;t.chooseLocation({success:function(n){var o=n.name;o.length>=8&&(o=o.slice(0,8)+"..."),e.location=o,t.setStorageSync("location",o)}})},goDetail:function(e,n){e&&n&&t.navigateTo({url:"../goodsDetail/main?goodCode=".concat(e,"&rule=").concat(n)})},goSearch:function(){t.navigateTo({url:"../search/main"})},goGoodDetail:function(e,n){t.navigateTo({url:"../goodsDetail/main?goodCode=".concat(e.goodsCode,"&rule=").concat(n[0])})},addShopcart:function(e,n,a,i,c){var r=this;if(t.getStorageSync("userPhone")){var u=t.getStorageSync("shopcart")||[];if(0==u.length)u.push({goodsCode:e,img:a,title:i,price:c,rule:n,sum:1,select:!0});else{for(var s=!0,l=0;l<u.length;l++)u[l].goodsCode==e&&u[l].rule==n&&(u[l].sum=u[l].sum+1,u[l].select=!0,s=!1);s&&u.push({goodsCode:e,img:a,title:i,price:c,rule:n,sum:1,select:!0})}o.callFunction({name:"shopcart",data:{type:"update",shopcart:u,user:t.getStorageSync("userPhone")}}).then((function(e){t.setStorageSync("shopcart",u),r.$refs.nav.getSum(),t.showToast({icon:"none",title:"添加购物车成功"})}))}else t.navigateTo({url:"../login/main"})}},onShareAppMessage:function(){}};e.default=i}).call(this,n("543d")["default"],n("a9ff")["default"])},"683b":function(t,e,n){"use strict";(function(t){n("2662");o(n("66fd"));var e=o(n("f02f"));function o(t){return t&&t.__esModule?t:{default:t}}t(e.default)}).call(this,n("543d")["createPage"])},9876:function(t,e,n){"use strict";n.r(e);var o=n("36e9"),a=n.n(o);for(var i in o)"default"!==i&&function(t){n.d(e,t,(function(){return o[t]}))}(i);e["default"]=a.a},a31f:function(t,e,n){},d6ea:function(t,e,n){"use strict";var o=n("a31f"),a=n.n(o);a.a},f02f:function(t,e,n){"use strict";n.r(e);var o=n("3570"),a=n("9876");for(var i in a)"default"!==i&&function(t){n.d(e,t,(function(){return a[t]}))}(i);n("d6ea");var c,r=n("f0c5"),u=Object(r["a"])(a["default"],o["b"],o["c"],!1,null,"5c0ea655",null,!1,o["a"],c);e["default"]=u.exports}},[["683b","common/runtime","common/vendor"]]]);