(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/shopCart/main"],{"00c8":function(t,e,n){"use strict";n.r(e);var s=n("eb73"),o=n.n(s);for(var a in s)"default"!==a&&function(t){n.d(e,t,(function(){return s[t]}))}(a);e["default"]=o.a},3070:function(t,e,n){"use strict";var s=n("b2e1"),o=n.n(s);o.a},3596:function(t,e,n){"use strict";(function(t){n("2662");s(n("66fd"));var e=s(n("4751"));function s(t){return t&&t.__esModule?t:{default:t}}t(e.default)}).call(this,n("543d")["createPage"])},4751:function(t,e,n){"use strict";n.r(e);var s=n("c9d1"),o=n("00c8");for(var a in o)"default"!==a&&function(t){n.d(e,t,(function(){return o[t]}))}(a);n("3070");var r,i=n("f0c5"),c=Object(i["a"])(o["default"],s["b"],s["c"],!1,null,"0b7018f6",null,!1,s["a"],r);e["default"]=c.exports},b2e1:function(t,e,n){},c9d1:function(t,e,n){"use strict";n.d(e,"b",(function(){return o})),n.d(e,"c",(function(){return a})),n.d(e,"a",(function(){return s}));var s={uPopup:function(){return n.e("node-modules/uview-ui/components/u-popup/u-popup").then(n.bind(null,"6bbb"))}},o=function(){var t=this,e=t.$createElement,n=(t._self._c,!t.login&&t.flag&&0!=t.shopcart.length?t.__map(t.shopcart,(function(e,n){var s=t.__get_orig(e),o=e.rule.split(" "),a=t.priceFix(e.price,1),r=t.priceFix(e.price,2);return{$orig:s,g0:o,m0:a,m1:r}})):null),s=t.flag?t.priceTotal.split("."):null,o=t.flag?t.priceTotal.split("."):null,a=t.flag&&t.priceTotal-0<100&&t.priceTotal-0>0?(100-t.priceTotal).toFixed(2):null;t.$mp.data=Object.assign({},{$root:{l0:n,g1:s,g2:o,g3:a}})},a=[]},eb73:function(t,e,n){"use strict";(function(t,s){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var o=function(){n.e("pages/component/navBar").then(function(){return resolve(n("a2f6"))}.bind(null,n)).catch(n.oe)},a={data:function(){return{login:!1,shopcart:null,flag:!1,bottom:!1,address:null,show:!1,showAddress:null,addressIndex:-1}},onLoad:function(t){t.item||(this.bottom=!0)},beforeMount:function(){t.getStorageSync("userPhone")||(this.login=!0)},computed:{priceTotal:function(){return null==this.shopcart?0:this.shopcart.reduce((function(t,e){return e.select?t+e.price*e.sum:t}),0).toFixed(2)},sumTotal:function(){return null==this.shopcart?0:this.shopcart.reduce((function(t,e){return e.select?t+e.sum:t}),0)},all:function(){return null==this.shopcart?0:this.shopcart.reduce((function(t,e){return!!t&&!!e.select}),!0)}},components:{navBar:o},onShow:function(){var e=this;t.hideHomeButton(),this.show=!1,this.login||(t.showLoading({title:"加载中",mask:!0}),s.callFunction({name:"shopcart",data:{type:"get",user:t.getStorageSync("userPhone")}}).then((function(n){t.setStorageSync("shopcart",n.result.data[0].shopcart),e.shopcart=n.result.data[0].shopcart,e.flag=!0,e.bottom&&e.$refs.nav.getSum(),null!==e.address&&t.hideLoading()})),this.getAddress())},methods:{getAddress:function(){var e=this;s.callFunction({name:"address",data:{type:"get",user:t.getStorageSync("userPhone")}}).then((function(n){e.address=n.result.data[0].address;for(var s=0;s<e.address.length;s++){if(e.address[s].isDefault){e.showAddress=e.address[s],e.addressIndex=s;break}s==e.address.length-1&&(e.showAddress=e.address[0],e.addressIndex=0)}null!==e.shopcart&&t.hideLoading()}))},goIndex:function(){t.redirectTo({url:"../index/main"})},goLogin:function(){t.navigateTo({url:"../login/main"})},priceFix:function(t,e){t=t.toFixed(2)+"";var n=t.split(".");return 1==e?n[0]:2==e?n[1]:void 0},update:function(){var e=this;t.showLoading({title:"修改中",mask:!0}),s.callFunction({name:"shopcart",data:{type:"update",shopcart:this.shopcart,user:t.getStorageSync("userPhone")}}).then((function(n){t.hideLoading(),t.setStorageSync("shopcart",e.shopcart),t.showToast({icon:"none",title:"修改成功"}),e.bottom&&e.$refs.nav.getSum()}))},select:function(t){this.shopcart[t].select=!this.shopcart[t].select,this.update()},sum:function(t,e){"+"==e?(this.shopcart[t].sum=this.shopcart[t].sum+1,this.update()):(1==this.shopcart[t].sum?this.shopcart.splice(t,1):this.shopcart[t].sum=this.shopcart[t].sum-1,this.update())},goDetail:function(e,n){t.navigateTo({url:"../goodsDetail/main?goodCode=".concat(e,"&rule=").concat(n)})},changeAll:function(t){this.shopcart=this.shopcart.map((function(e){return e.select=!t,e})),this.update()},showMask:function(){this.show=!0},modifyAddress:function(e){t.navigateTo({url:"../address/main?address=".concat(JSON.stringify(this.address),"&index=").concat(e)})},changeAddressIndex:function(t,e){this.addressIndex=e,this.showAddress=t,this.show=!1},setOrder:function(){0!=this.sumTotal&&(this.showAddress?t.navigateTo({url:"../order/main?address=".concat(JSON.stringify(this.showAddress),"&shopcart=").concat(JSON.stringify(this.shopcart))}):t.showToast({icon:"none",title:"请先选择收货地址"}))}}};e.default=a}).call(this,n("543d")["default"],n("a9ff")["default"])}},[["3596","common/runtime","common/vendor"]]]);